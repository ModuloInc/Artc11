"use client"
import Link from 'next/link';
import {usePathname} from 'next/navigation';
import {ReactNode} from 'react';

// Type pour les éléments de navigation
interface NavItem {
    path: string;
    icon: ReactNode;
    disable?: boolean;
}

// Props du composant principal
interface TabBarProps {
    items?: NavItem[];
    selected?: number;
}

// Composant par défaut avec emplacements pour vos propres SVG
const TabBar = ({items, selected}: TabBarProps) => {
    const pathname = usePathname();

    // Navigation par défaut - à remplacer avec vos propres SVG et libellés
    const defaultItems: NavItem[] = [
        {
            path: '/',
            icon: (
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M7.92265 24.7677H11.8437V18.2326C11.8437 17.8623 11.9692 17.552 12.2202 17.302C12.4711 17.0519 12.7813 16.9264 13.1508 16.9255H18.3789C18.7492 16.9255 19.0598 17.051 19.3108 17.302C19.5617 17.5529 19.6868 17.8631 19.6859 18.2326V24.7677H23.607V13.0045L15.7648 7.12284L7.92265 13.0045V24.7677ZM5.30859 24.7677V13.0045C5.30859 12.5906 5.40139 12.1985 5.58699 11.8281C5.77259 11.4578 6.02833 11.1528 6.35422 10.9132L14.1964 5.0316C14.6538 4.68306 15.1767 4.50879 15.7648 4.50879C16.353 4.50879 16.8758 4.68306 17.3332 5.0316L25.1754 10.9132C25.5022 11.1528 25.7583 11.4578 25.9439 11.8281C26.1295 12.1985 26.2219 12.5906 26.221 13.0045V24.7677C26.221 25.4866 25.9649 26.1022 25.4525 26.6145C24.9401 27.1269 24.325 27.3826 23.607 27.3818H18.3789C18.0085 27.3818 17.6983 27.2563 17.4483 27.0053C17.1982 26.7544 17.0727 26.4442 17.0718 26.0747V19.5396H14.4578V26.0747C14.4578 26.4451 14.3323 26.7557 14.0814 27.0066C13.8304 27.2576 13.5202 27.3826 13.1508 27.3818H7.92265C7.20378 27.3818 6.58861 27.126 6.07713 26.6145C5.56564 26.1031 5.30947 25.4874 5.30859 24.7677Z"
                        fill="currentColor"/>
                </svg>
            ),
        },
        {
            path: '/vote',
            icon: (
                <svg width="31" height="24" viewBox="0 0 31 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M12.0238 18.8657H9.21255L6.64463 23.7002H30.8259L28.258 18.8657H25.7026L26.2664 20.5473H24.5532L22.0522 7.7252C22.0522 7.7252 21.7525 7.80402 21.3041 7.91691L21.2731 7.76417C21.2179 7.50018 21.116 7.26044 20.9947 7.0322C20.8727 6.80432 20.7306 6.58923 20.5835 6.38887L20.5409 6.33096L20.4874 6.28538C20.1497 5.99223 19.5386 5.51192 18.5004 4.84808L18.5029 4.84972C17.4158 4.15175 16.1866 3.77779 15.1154 3.75272C12.8057 3.70592 10.2537 3.65455 9.5712 3.64106L8.92541 3.23297L9.30702 2.67991L5.36358 0L0.368652 7.30274L4.26652 9.98195L4.78977 9.22403L6.12311 10.1087L8.04441 12.914C8.32822 13.3278 8.71483 13.6661 9.16919 13.8931L9.17377 13.8956C9.17377 13.8956 9.51606 14.0631 9.99588 14.3012C10.4749 14.5393 11.0914 14.8481 11.6351 15.1285C12.0732 15.3535 12.5714 15.5493 13.0971 15.7218L13.1038 15.7238L13.4381 15.8256L14.3643 20.5473H12.5934L12.0238 18.8657ZM13.5008 14.5246C13.023 14.3678 12.5842 14.1933 12.231 14.0115C11.1352 13.447 9.77596 12.7815 9.74877 12.7679C9.49381 12.6402 9.27026 12.4453 9.10976 12.2104L7.04926 9.20107L5.51033 8.18003L8.20449 4.27744L9.18251 4.89494L9.36389 4.89821C9.36389 4.89821 10.122 4.91382 11.2163 4.93561C12.3109 4.95776 13.7424 4.98651 15.0891 5.01403C15.8677 5.02595 16.921 5.33342 17.7974 5.90324L17.8242 5.92048L17.7999 5.90488C18.7337 6.50263 19.2812 6.92796 19.5804 7.18249C19.6172 7.23338 19.6523 7.28427 19.6857 7.33523L17.9145 7.48096L15.7369 8.25523L15.6538 8.32091C14.9545 8.87227 14.5425 9.6999 14.5282 10.5785V10.6183C14.5279 11.4858 14.9153 12.3093 15.5886 12.8709L15.7303 12.9887L15.7478 12.9912C15.8005 13.0331 15.8741 13.0922 15.9811 13.1804C16.2206 13.3779 16.6147 13.708 17.2567 14.2556C17.3746 14.3562 17.4414 14.447 17.479 14.5221C17.517 14.5976 17.5287 14.658 17.5292 14.7171C17.5301 14.8403 17.4649 14.993 17.2993 15.1321C17.1363 15.2684 16.8881 15.369 16.6022 15.3686C16.4868 15.3686 16.3656 15.353 16.2385 15.3169L16.2089 15.3087L16.2411 15.3177C15.7446 15.1748 15.2213 15.0373 14.7097 14.892L13.5008 14.5246Z"
                        fill="currentColor"/>
                </svg>
            ),
            disable: true,
        },
        {
            path: '/forum',
            icon: (
                <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
                     width="31" height="24" viewBox="0 0 512.000000 512.000000"
                >

                    <g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
                       fill="currentColor" stroke="none">
                        <path d="M1555 5106 c-111 -35 -190 -104 -239 -206 l-31 -65 0 -570 0 -570 33
-67 c41 -83 119 -158 200 -189 54 -22 73 -23 352 -27 l295 -4 140 -186 c77
-103 155 -197 174 -209 43 -29 113 -31 158 -4 17 11 106 105 198 209 l166 190
272 4 c255 4 276 5 329 27 81 31 159 106 200 189 l33 67 0 570 0 570 -31 65
c-40 84 -100 144 -182 183 l-67 32 -980 2 c-772 1 -988 -1 -1020 -11z"/>
                        <path d="M301 4899 c-109 -21 -212 -102 -263 -207 l-33 -67 0 -570 0 -570 28
-61 c61 -132 184 -213 336 -222 l86 -5 130 -174 c149 -200 186 -238 242 -248
78 -13 105 8 294 222 l173 196 -25 16 c-13 9 -53 43 -88 76 -111 104 -189 249
-211 391 -13 81 -9 1176 4 1212 l8 22 -318 -1 c-176 -1 -339 -5 -363 -10z"/>
                        <path d="M4147 4873 c4 -21 8 -301 8 -623 0 -658 3 -628 -78 -785 -30 -58 -63
-102 -122 -161 -44 -44 -91 -87 -104 -95 l-25 -16 173 -196 c189 -214 216
-235 293 -222 57 10 91 45 238 244 l132 178 88 5 c66 4 102 12 146 32 77 35
155 113 191 190 l28 61 0 570 0 570 -33 67 c-40 83 -119 158 -200 190 -55 22
-70 23 -400 26 l-343 3 8 -38z"/>
                        <path d="M2465 2659 c-362 -55 -605 -405 -530 -764 49 -233 245 -435 475 -489
36 -9 103 -16 150 -16 179 0 318 58 446 185 161 159 223 363 178 583 -66 327
-389 552 -719 501z"/>
                        <path d="M764 2335 c-82 -18 -137 -47 -201 -107 -90 -86 -133 -185 -133 -308
0 -124 43 -222 135 -309 168 -159 422 -155 588 10 168 168 168 430 0 598 -65
64 -139 104 -227 120 -72 13 -84 13 -162 -4z"/>
                        <path d="M4180 2336 c-84 -18 -149 -54 -213 -117 -168 -167 -168 -430 0 -598
166 -165 420 -169 588 -10 92 87 135 185 135 309 0 123 -43 222 -133 308 -65
61 -119 89 -206 108 -78 16 -98 16 -171 0z"/>
                        <path d="M442 1260 c-106 -28 -187 -75 -268 -155 -125 -124 -179 -271 -172
-469 3 -116 14 -140 78 -183 l33 -23 478 0 479 0 0 75 c0 220 98 444 267 612
l82 82 -55 26 c-103 49 -161 55 -519 54 -292 0 -338 -2 -403 -19z"/>
                        <path d="M3874 1265 c-34 -7 -87 -25 -117 -40 l-56 -26 82 -82 c169 -168 267
-392 267 -612 l0 -75 479 0 478 0 33 22 c64 44 75 68 78 184 7 197 -47 343
-172 469 -82 82 -161 127 -272 155 -70 18 -110 20 -408 19 -236 0 -349 -4
-392 -14z"/>
                        <path d="M1886 1060 c-73 -13 -144 -38 -206 -73 -79 -44 -179 -149 -222 -232
-60 -116 -68 -164 -68 -417 0 -217 1 -226 23 -258 12 -18 35 -43 50 -54 28
-21 28 -21 1097 -21 1069 0 1069 0 1097 21 15 11 38 36 51 54 21 32 22 41 22
258 0 253 -8 301 -68 417 -48 92 -156 201 -243 244 -137 67 -107 65 -829 67
-360 1 -677 -2 -704 -6z"/>
                    </g>
                </svg>
            ),
        },
        {
            path: '/profile',
            icon: (
                <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M12.5 0.850098C14.1576 0.850098 15.7473 1.48224 16.9194 2.60746C18.0915 3.73267 18.75 5.2588 18.75 6.8501C18.75 8.4414 18.0915 9.96752 16.9194 11.0927C15.7473 12.218 14.1576 12.8501 12.5 12.8501C10.8424 12.8501 9.25268 12.218 8.08058 11.0927C6.90848 9.96752 6.25 8.4414 6.25 6.8501C6.25 5.2588 6.90848 3.73267 8.08058 2.60746C9.25268 1.48224 10.8424 0.850098 12.5 0.850098ZM12.5 15.8501C19.4062 15.8501 25 18.5351 25 21.8501V24.8501H0V21.8501C0 18.5351 5.59375 15.8501 12.5 15.8501Z"
                        fill="currentColor"/>
                </svg>
            ),
        },
    ];

    // Utiliser les éléments fournis ou les éléments par défaut
    const navItems = items || defaultItems;

    // Vérifier si un chemin est actif
    const isActive = (index: number) => {
        // Si selected est défini, l'utiliser pour déterminer l'élément actif
        if (selected) {
            return index === selected - 1; // Convert 1-based to 0-based index
        }
        // Sinon, vérifier si le chemin correspond au pathname actuel
        return pathname === navItems[index].path;
    };

    return (
        <nav
            className="fixed bottom-0 left-0 right-0 h-16 bg-white border-t border-gray-200 flex justify-around items-center px-4 z-10">
            {navItems.map((item, index) => (
                <Link
                    key={index}
                    href={item.path}
                    className={`flex flex-col items-center ${isActive(index) ? 'text-[#FFD632]' : 'text-gray-600'} ${item.disable ? 'pointer-events-none opacity-50' : ''}`}
                    aria-disabled={item.disable}
                >
                    {item.icon}
                </Link>
            ))}
        </nav>
    );
};

export default TabBar;

